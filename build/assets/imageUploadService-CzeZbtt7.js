const g="dqis32szu",m="daily_logs",f=async o=>{var t;try{if(!o)return{success:!1,error:"No file provided"};if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(o.type))return{success:!1,error:"Invalid file type. Please upload JPG, PNG, or WebP."};const d=5*1024*1024;if(o.size>d)return{success:!1,error:"File too large. Maximum size is 5MB."};const s=new FormData;s.append("file",o),s.append("upload_preset",m),s.append("folder","hl-constructions/projects"),console.log("ðŸ“¤ Uploading to Cloudinary...");const r=await fetch(`https://api.cloudinary.com/v1_1/${g}/image/upload`,{method:"POST",body:s});if(!r.ok){const e=await r.json();return console.error("âŒ Cloudinary upload error:",e),r.status===401?{success:!1,error:"Upload preset not configured. Please check CLOUDINARY_UPLOAD_PRESET."}:{success:!1,error:((t=e.error)==null?void 0:t.message)||"Upload failed. Please try again."}}const a=await r.json();return console.log("âœ… Image uploaded successfully:",a.secure_url),{success:!0,url:a.secure_url,publicId:a.public_id,width:a.width,height:a.height}}catch(c){return console.error("âŒ Error uploading image:",c),{success:!1,error:"Network error. Please check your internet connection and try again."}}},y=async(o,t=1920,c=.85)=>new Promise((d,s)=>{const r=new FileReader;r.onload=a=>{const e=new Image;e.onload=()=>{const i=document.createElement("canvas");let n=e.width,l=e.height;n>t&&(l=l*t/n,n=t),i.width=n,i.height=l,i.getContext("2d").drawImage(e,0,0,n,l),i.toBlob(u=>{const p=new File([u],o.name,{type:"image/jpeg",lastModified:Date.now()});d(p)},"image/jpeg",c)},e.onerror=s,e.src=a.target.result},r.onerror=s,r.readAsDataURL(o)});export{y as c,f as u};
